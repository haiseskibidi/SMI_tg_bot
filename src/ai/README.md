# ü§ñ AI –ú–æ–¥—É–ª–∏ –¥–ª—è –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –±–æ—Ç–∞

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π.

## üéØ –§—É–Ω–∫—Ü–∏–∏

### üö® –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏ (`urgency_detector.py`)

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Ö —Å—Ä–æ—á–Ω–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é:

- **HuggingFace AI –º–æ–¥–µ–ª–µ–π** - sentiment analysis –∏ text classification
- **–ö–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤** - —Å–ø–∏—Å–æ–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–í—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤** - "—Å—Ä–æ—á–Ω–æ", "—Ç–æ–ª—å–∫–æ —á—Ç–æ", –≤—Ä–µ–º—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–∫–æ—Ä–∏–Ω–≥–∞** - AI + –ø—Ä–∞–≤–∏–ª–∞ + —ç–≤—Ä–∏—Å—Ç–∏–∫–∏

### üìä –£—Ä–æ–≤–Ω–∏ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏

| –£—Ä–æ–≤–µ–Ω—å | –≠–º–æ–¥–∑–∏ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä—ã |
|---------|--------|----------|---------|
| **urgent** | üî¥ | –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è | –ß–ü, —Ç–µ—Ä–∞–∫—Ç—ã, –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ã |
| **important** | üü° | –ó–Ω–∞—á–∏–º—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ | –ü–æ–ª–∏—Ç–∏–∫–∞, —ç–∫–æ–Ω–æ–º–∏–∫–∞ |
| **normal** | ‚ö™ | –û–±—ã—á–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ | –°–ø–æ—Ä—Ç, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è |

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install transformers torch accelerate sentencepiece
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
–í `config/config.yaml`:
```yaml
ai:
  enabled: true
  urgency_detection:
    enabled: true
    min_score_urgent: 0.7
    min_score_important: 0.4
    use_huggingface: true
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python test_urgency.py
```

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
```python
from src.ai.urgency_detector import analyze_news_urgency

# –ê–Ω–∞–ª–∏–∑ –Ω–æ–≤–æ—Å—Ç–∏
result = await analyze_news_urgency("–°—Ä–æ—á–Ω–æ! –ü–æ–∂–∞—Ä –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞!")

print(result['urgency_level'])  # 'urgent'
print(result['urgency_score'])  # 0.85
print(result['emoji'])          # 'üî¥'
print(result['reasoning'])      # '–§–∞–∫—Ç–æ—Ä—ã: –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: 2, –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã'
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
```python
from src.ai.urgency_detector import urgency_detector

original_text = "–ê–≤–∞—Ä–∏—è –Ω–∞ –ú–ö–ê–î, –µ—Å—Ç—å –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ"
urgency_data = await urgency_detector.detect_urgency(original_text)

formatted = urgency_detector.format_urgent_message(original_text, urgency_data)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: "üî¥ **üö® –°–†–û–ß–ù–û üö®**\n\n–ê–≤–∞—Ä–∏—è –Ω–∞ –ú–ö–ê–î, –µ—Å—Ç—å –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ"
```

## üéõÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–æ—Ä–æ–≥–∏ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏
```python
# –í urgency_detector.py
if final_score >= 0.7:      # –°—Ä–æ—á–Ω—ã–µ
    urgency_level = 'urgent'
elif final_score >= 0.4:    # –í–∞–∂–Ω—ã–µ  
    urgency_level = 'important'
else:                       # –û–±—ã—á–Ω—ã–µ
    urgency_level = 'normal'
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
```python
urgent_keywords = {
    'emergency': ['–ø–æ–∂–∞—Ä', '–≤–∑—Ä—ã–≤', '–∞–≤–∞—Ä–∏—è', '–∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞'],
    'politics_urgent': ['–æ—Ç—Å—Ç–∞–≤–∫–∞', '–∞—Ä–µ—Å—Ç', '–≤–æ–π–Ω–∞'],
    'economy_urgent': ['–¥–µ—Ñ–æ–ª—Ç', '–±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ', '–∫—Ä–∏–∑–∏—Å'],
    'crime_urgent': ['—É–±–∏–π—Å—Ç–≤–æ', '–ø–æ—Ö–∏—â–µ–Ω–∏–µ', '—Ç–µ—Ä—Ä–æ—Ä']
}
```

### AI –º–æ–¥–µ–ª–∏
```python
# –ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)
sentiment_model = "cardiffnlp/twitter-xlm-roberta-base-sentiment"

# –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
classifier_model = "facebook/bart-large-mnli"
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **RAM**: 2-4 GB –¥–ª—è –º–æ–¥–µ–ª–µ–π
- **CPU/GPU**: Torch –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç CUDA
- **–í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞**: 0.5-2 —Å–µ–∫ –Ω–∞ –Ω–æ–≤–æ—Å—Ç—å

### Fallback –ª–æ–≥–∏–∫–∞
- –ü—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ AI ‚Üí –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –º–æ–¥–µ–ª–∏ ‚Üí –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –±–µ–∑ AI
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

## üîç –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤** –∏–∑ —Ç–µ–∫—Å—Ç–∞
2. **AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** —á–µ—Ä–µ–∑ HuggingFace
3. **–ê–Ω–∞–ª–∏–∑ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** (–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ —á–∞—Å—Ç–æ —Å—Ä–æ—á–Ω—ã–µ)
4. **–ü–æ–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∞—Ä–∫–µ—Ä–æ–≤** ("—Å—Ä–æ—á–Ω–æ", "—Å–µ–π—á–∞—Å")
5. **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥** –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤
6. **–ü—Ä–∏—Å–≤–æ–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è** –∏ —ç–º–æ–¥–∑–∏
7. **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–æ–±—â–µ–Ω–∏—è

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ debug –ª–æ–≥–æ–≤
export LOG_LEVEL=DEBUG

# –ü—Ä–æ—Å–º–æ—Ç—Ä AI –∞–Ω–∞–ª–∏–∑–∞
tail -f logs/news_monitor.log | grep "ü§ñ\|üéØ\|üî¥\|üü°"
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```python
stats = await urgency_detector.get_statistics()
print(f"AI –º–æ–¥–µ–ª–∏: {stats['ai_models_loaded']}")
print(f"–ö–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: {stats['total_keywords']}")
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã
python test_urgency.py

# –¢–µ—Å—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –Ω–æ–≤–æ—Å—Ç–∏
python -c "
import asyncio
from src.ai.urgency_detector import analyze_news_urgency
result = asyncio.run(analyze_news_urgency('–í–∞—à —Ç–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏'))
print(result)
"
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
AI –º–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è –≤ `MessageProcessor`:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—É—é –Ω–æ–≤–æ—Å—Ç—å
- –î–æ–±–∞–≤–ª—è–µ—Ç —ç–º–æ–¥–∑–∏ –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤ –ë–î
- –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ AI
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã AI
systemctl status news-monitor-*
journalctl -u news-monitor-* | grep "ü§ñ"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ä–æ—á–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
grep "üî¥ –°–†–û–ß–ù–ê–Ø" logs/*.log | wc -l
```

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- üìù **–ê–≤—Ç–æ—Å–∞–º–º–∞—Ä–∏** - –∫—Ä–∞—Ç–∫–∏–µ –∏–∑–ª–æ–∂–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- üîç **–ü–æ–∏—Å–∫ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –Ω–æ–≤–æ—Å—Ç–µ–π
- üè∑Ô∏è **–ê–≤—Ç–æ—Ç–µ–≥–∏** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ–º
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–µ–Ω–¥–æ–≤** - –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–µ–º
- üåê **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤
