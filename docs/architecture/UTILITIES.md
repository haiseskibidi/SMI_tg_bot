# üõ†Ô∏è UTILITIES - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞–±–æ—Ä –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –¥–µ–ø–ª–æ—è News Monitor Bot. –£—Ç–∏–ª–∏—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ –∞—Å–ø–µ–∫—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è: –æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è.

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `tools/` –ø–∞–ø–∫–∞  
**–î–µ–ø–ª–æ–π**: systemd —Å–µ—Ä–≤–∏—Å + –∫–æ–º–∞–Ω–¥–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏  
**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: Kill Switch —Å–∏—Å—Ç–µ–º–∞ + –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Ç–∏–ª–∏—Ç

```
UTILITIES ECOSYSTEM
‚îú‚îÄ‚îÄ Setup & Auth               # –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ setup_user_auth.py    # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è Telethon
‚îÇ   ‚îî‚îÄ‚îÄ safe_mode.py          # –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º
‚îú‚îÄ‚îÄ Maintenance               # –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îú‚îÄ‚îÄ cleanup_database.py   # –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ backup_channels_config.py # –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ add_news_manual.py    # –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ Monitoring & Control     # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ Kill Switch —Å–∏—Å—Ç–µ–º–∞   # –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ Web Interface        # –í–µ–±-–ø–∞–Ω–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ System Commands      # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥
‚îî‚îÄ‚îÄ Deployment              # –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ systemd service      # –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
    ‚îú‚îÄ‚îÄ server_commands.txt  # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    ‚îî‚îÄ‚îÄ Environment setup   # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —É—Ç–∏–ª–∏—Ç

```python
# –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
1. –ê–≤—Ç–æ–Ω–æ–º–Ω–æ—Å—Ç—å - –∫–∞–∂–¥–∞—è —É—Ç–∏–ª–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
2. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å - –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏  
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
4. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥ –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
5. –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–º–µ–Ω—ã –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
```

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### setup_user_auth.py - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telethon –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤  
**–§–∞–π–ª**: `tools/setup_user_auth.py` (124 —Å—Ç—Ä–æ–∫–∏)

#### üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
python tools/setup_user_auth.py

# –°–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
RESET_TELETHON_SESSION=1 python tools/setup_user_auth.py
```

#### üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

```python
async def setup_user_authentication():
    """–ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"""
    
    # 1. –ó–∞–≥—Ä—É–∑–∫–∞ API –∫–ª—é—á–µ–π –∏–∑ .env
    api_id = int(os.getenv('TELEGRAM_API_ID'))
    api_hash = os.getenv('TELEGRAM_API_HASH')
    
    # 2. –°–æ–∑–¥–∞–Ω–∏–µ Telethon –∫–ª–∏–µ–Ω—Ç–∞
    session_path = repo_root / 'sessions' / 'news_monitor_session'
    client = TelegramClient(str(session_path), api_id, api_hash)
    
    # 3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    await client.start()  # –ó–∞–ø—Ä–æ—Å –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∫–æ–¥–∞
    
    # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    me = await client.get_me()
    if hasattr(me, 'phone') and me.phone:
        print("‚úÖ –£–°–ü–ï–®–ù–û! –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞")
        
        # 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–Ω–∞–ª—É
        test_channel = "@SMIzametki"
        entity = await client.get_entity(test_channel)
        
        # 6. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
        async for message in client.iter_messages(entity, limit=3):
            if message.text:
                print(f"üìÑ –°–æ–æ–±—â–µ–Ω–∏–µ: {message.text[:80]}...")
```

#### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏**: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Å—Å–∏—è –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —á–∞—Å—Ç—ã—Ö –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–π
- **–°–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏**: —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `RESET_TELETHON_SESSION=1`  
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏**: —Ä–∞–∑–ª–∏—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç –±–æ—Ç–∞ –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### safe_mode.py - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–∂–∏–º

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤  
**–§–∞–π–ª**: `tools/safe_mode.py` (58 —Å—Ç—Ä–æ–∫)

#### üõ°Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ
python tools/safe_mode.py
```

#### üéØ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ

```python
async def run_safe_mode():
    """–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞"""
    
    print("üõ°Ô∏è –ë–ï–ó–û–ü–ê–°–ù–´–ô –†–ï–ñ–ò–ú - –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤")
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    db = DatabaseManager("news_monitor.db")
    await db.initialize()
    
    bot = TelegramBot(
        token=config['bot']['token'],
        chat_id=config['bot']['chat_id']
    )
    
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    if await bot.test_connection():
        await bot.send_message(
            "üõ°Ô∏è –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞ –≤ –ë–ï–ó–û–ü–ê–°–ù–û–ú –†–ï–ñ–ò–ú–ï\n\n"
            "‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ –û–¢–ö–õ–Æ–ß–ï–ù\n"
            "üì± –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç\n"  
            "üñ•Ô∏è –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8080"
        )
```

#### ‚úÖ –î–æ—Å—Ç—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- ‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ http://localhost:8080
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤ **–û–¢–ö–õ–Æ–ß–ï–ù**

#### üí° –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- **–û—Ç–ª–∞–¥–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ Telegram API
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**: –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞  
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**: –∏–∑–±–µ–∂–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö rate limits
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## üßπ –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### cleanup_database.py - –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π  
**–§–∞–π–ª**: `tools/cleanup_database.py` (155 —Å—Ç—Ä–æ–∫)

#### üóëÔ∏è –†–µ–∂–∏–º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python tools/cleanup_database.py

# –£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—à–µ 3 –¥–Ω–µ–π
python tools/cleanup_database.py 3

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–û–°–¢–û–†–û–ñ–ù–û!)
python tools/cleanup_database.py all
```

#### üéØ –ß—Ç–æ –æ—á–∏—â–∞–µ—Ç—Å—è

```python
async def cleanup_database(days_to_keep: int = 7, clear_all: bool = False):
    """–°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∏–ª–∏ –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö"""
    
    if clear_all:
        # –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê (—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º)
        confirm = input("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –í–≤–µ–¥–∏—Ç–µ 'YES' –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: ")
        if confirm != "YES":
            return
            
        # –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
        tables = ['messages', 'sent_digests', 'processed_hashes', 'channel_checks', 'statistics']
        for table in tables:
            result = conn.execute(f"DELETE FROM {table}")
            print(f"üóëÔ∏è –û—á–∏—â–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ {table}: {result.rowcount} –∑–∞–ø–∏—Å–µ–π")
    else:
        # –ß–ê–°–¢–ò–ß–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –ø–æ –¥–∞—Ç–µ
        cutoff_date = datetime.now() - timedelta(days=days_to_keep)
        
        # –°—Ç–∞—Ä—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
        result = conn.execute("DELETE FROM messages WHERE created_at < ?", (cutoff_date,))
        print(f"üì∞ –£–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: {result.rowcount}")
        
        # –°—Ç–∞—Ä—ã–µ –¥–∞–π–¥–∂–µ—Å—Ç—ã  
        result = conn.execute("DELETE FROM sent_digests WHERE sent_at < ?", (cutoff_date,))
        print(f"üì® –£–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä—ã—Ö –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤: {result.rowcount}")
        
        # –°—Ç–∞—Ä—ã–µ —Ö—ç—à–∏ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏
        result = conn.execute("DELETE FROM processed_hashes WHERE first_seen < ?", (cutoff_date,))
        print(f"üîó –£–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä—ã—Ö —Ö—ç—à–µ–π: {result.rowcount}")
        
        # –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
        result = conn.execute("DELETE FROM channel_checks WHERE updated_at < ?", (cutoff_date,))
        print(f"üì∫ –£–¥–∞–ª–µ–Ω–æ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–∞–Ω–∞–ª–æ–≤: {result.rowcount}")
    
    # –°–∂–∞—Ç–∏–µ –±–∞–∑—ã –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
    conn.execute("VACUUM")
    print("üóúÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∂–∞—Ç–∞")
```

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

```python
# –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã
with db_manager._get_connection() as conn:
    cursor = conn.execute("SELECT COUNT(*) FROM messages")
    messages_count = cursor.fetchone()[0]
    
    cursor = conn.execute("SELECT COUNT(*) FROM sent_digests")  
    digests_count = cursor.fetchone()[0]
    
    print(f"\nüìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞–∑—ã:")
    print(f"üì∞ –°–æ–æ–±—â–µ–Ω–∏–π: {messages_count}")
    print(f"üì® –î–∞–π–¥–∂–µ—Å—Ç–æ–≤: {digests_count}")
    
    # –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    db_size = os.path.getsize(db_path) / 1024 / 1024
    print(f"üíæ –†–∞–∑–º–µ—Ä –±–∞–∑—ã: {db_size:.2f} MB")
```

#### ‚ö†Ô∏è –ú–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏**: —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ 'YES' –¥–ª—è –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞**: —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–µ—Ä–µ–¥ –æ—á–∏—Å—Ç–∫–æ–π
- **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–ø–µ—Ä–∞—Ü–∏–µ–π
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞**: –∫–æ–Ω—Ç—Ä–æ–ª—å –æ–±—ä–µ–º–∞ —É–¥–∞–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### add_news_manual.py - –†—É—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π –≤ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–∞–Ω–∞–ª–æ–≤  
**–§–∞–π–ª**: `tools/add_news_manual.py` (96 —Å—Ç—Ä–æ–∫)

#### ‚úçÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏
python tools/add_news_manual.py
```

#### üìù –ü—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

```python
async def add_manual_news():
    """–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏"""
    
    print("üí¨ –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏:")
    
    # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
    title = input("üì∞ –ó–∞–≥–æ–ª–æ–≤–æ–∫: ").strip()
    text = input("üìÑ –¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏: ").strip()
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
    source = input("üìç –ò—Å—Ç–æ—á–Ω–∏–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é '–†—É—á–Ω–æ–π –≤–≤–æ–¥'): ").strip() or "–†—É—á–Ω–æ–π –≤–≤–æ–¥"
    region = input("üåç –†–µ–≥–∏–æ–Ω (sakhalin/kamchatka/other): ").strip() or "other"  
    url = input("üîó –°—Å—ã–ª–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): ").strip()
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–æ–æ–±—â–µ–Ω–∏—è
    now = datetime.now()
    message_data = {
        "id": f"manual_{int(now.timestamp())}",
        "channel_username": "@manual",
        "channel_name": source,
        "text": text,
        "date": now,
        "selected_for_output": True,  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä —Ä—É—á–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π
        "ai_score": 10,              # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
        "ai_priority": "high",       # –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
        "content_hash": f"manual_{now.timestamp()}"
    }
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await db.save_message(message_data)
    
    if await bot.test_connection():
        message = f"üì∞ **–ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞**\n\n**{title}**\n\n{text}"
        if url:
            message += f"\n\nüîó [–ß–∏—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é]({url})"
        message += f"\n\nüìç {source}"
        
        await bot.send_message(message)
        print("‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram")
```

#### üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä—É—á–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–±–æ—Ä**: `selected_for_output = True` 
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥**: `ai_score = 10`
- **–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: `ai_priority = "high"`
- **–£–Ω–∏–∫–∞–ª—å–Ω–∞—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ø—Ä–µ—Ñ–∏–∫—Å `manual_` –≤ ID
- **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ**: –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è

---

## üì¶ –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### backup_channels_config.py - –ë—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–Ω–∞–ª–æ–≤  
**–§–∞–π–ª**: `tools/backup_channels_config.py` (65 —Å—Ç—Ä–æ–∫)

#### üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞
python tools/backup_channels_config.py
```

#### üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```python
def backup_channels_config():
    """–°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤–µ—Ä—Å–∏—è–º–∏"""
    
    # –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –∏ –ø–∞–ø–∫–∞ –±—ç–∫–∞–ø–æ–≤
    source = Path('config/channels_config.yaml')
    backup_dir = Path('backups/channels_config')
    backup_dir.mkdir(parents=True, exist_ok=True)
    
    # –ò–º—è —Å timestamp
    timestamp = datetime.now().strftime('%Y-%m-%d_%H-%M-%S')
    backup_name = f'channels_config_{timestamp}.yaml'
    backup_path = backup_dir / backup_name
    
    # –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
    shutil.copy2(source, backup_path)
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø (latest.yaml)
    latest_link = backup_dir / 'latest.yaml'
    if latest_link.exists():
        latest_link.unlink()
    shutil.copy2(backup_path, latest_link)  # Windows —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
    
    print(f'‚úÖ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: {backup_name}')
    print(f'üìÅ –ü—É—Ç—å: {backup_path}')
    
    # –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤
    cleanup_old_backups(backup_dir)
```

#### üßπ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏

```python
def cleanup_old_backups(backup_dir, keep_count=10):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –±—ç–∫–∞–ø–æ–≤"""
    
    backup_files = list(backup_dir.glob('channels_config_*.yaml'))
    
    # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)
    backup_files.sort(key=lambda x: x.stat().st_mtime, reverse=True)
    
    # –£–¥–∞–ª–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö —Ñ–∞–π–ª–æ–≤ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö)
    for file in backup_files[keep_count:]:
        file.unlink()
        print(f'üóëÔ∏è –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π –±—ç–∫–∞–ø: {file.name}')
```

#### üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±—ç–∫–∞–ø–æ–≤

```
backups/channels_config/
‚îú‚îÄ‚îÄ channels_config_2025-01-20_14-30-15.yaml
‚îú‚îÄ‚îÄ channels_config_2025-01-20_10-15-22.yaml
‚îú‚îÄ‚îÄ channels_config_2025-01-19_18-45-33.yaml
‚îú‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ latest.yaml ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
```

#### üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –¥–æ–±–∞–≤–∏—Ç—å –≤ cron –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- **–ü–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –ø–µ—Ä–µ–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–∞–Ω–∞–ª–æ–≤
- **–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ latest.yaml –¥–ª—è –æ—Ç–∫–∞—Ç–∞

---

## üõ°Ô∏è Kill Switch —Å–∏—Å—Ç–µ–º–∞

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Å –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ–º –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–≤  
**–§–∞–π–ª—ã**: `src/handlers/commands/basic.py`, `main.py`

#### üö® –ê–∫—Ç–∏–≤–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞

```bash
# –í Telegram –±–æ—Ç–µ
/kill_switch
# ‚Üì –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É
"‚úÖ –î–ê, –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–¢–¨"
```

#### üîß –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç—ã

```python
# 1. –í main.py - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
if __name__ == "__main__":
    # Kill Switch –ø—Ä–æ–≤–µ—Ä–∫–∞ –ü–ï–†–ï–î –ª—é–±–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
    if os.path.exists("STOP_BOT"):
        print("üõë –ù–ê–ô–î–ï–ù –§–ê–ô–õ –ë–õ–û–ö–ò–†–û–í–ö–ò: STOP_BOT")
        print("üö´ –ë–û–¢ –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù –û–¢ –ó–ê–ü–£–°–ö–ê")  
        print("üí° –£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª STOP_BOT –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏")
        exit(0)
    
    asyncio.run(NewsMonitorWithBot().run())

# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
async def confirm_kill_switch(self, message):
    """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ kill switch"""
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    with open("STOP_BOT", "w") as f:
        f.write(f"Kill Switch activated at {datetime.now()}\n")
        f.write("Bot permanently blocked from starting\n")
    
    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await self.send_message_with_keyboard(
        "üõë <b>KILL SWITCH –ê–ö–¢–ò–í–ò–†–û–í–ê–ù!</b>\n\n"
        "üîí –§–∞–π–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ–∑–¥–∞–Ω\n"
        "üö´ –ë–æ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –æ—Ç –∑–∞–ø—É—Å–∫–∞\n\n"
        "üí° –î–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: /unlock",
        keyboard
    )
    
    await asyncio.sleep(3)
    
    # –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
    if self.monitor_bot:
        self.monitor_bot.running = False
    sys.exit(0)
```

#### üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

```python
async def unlock(self, message: Optional[Dict[str, Any]]) -> None:
    """–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã"""
    try:
        if os.path.exists("STOP_BOT"):
            os.remove("STOP_BOT")
            await self.bot.send_message(
                "üîì <b>–°–∏—Å—Ç–µ–º–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞!</b>\n\n"
                "‚úÖ –§–∞–π–ª –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —É–¥–∞–ª–µ–Ω\n"
                "üöÄ –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞\n\n"
                "üí° –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: <code>systemctl restart news-monitor.service</code>"
            )
        else:
            await self.bot.send_message("‚ÑπÔ∏è –°–∏—Å—Ç–µ–º–∞ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞")
    except Exception as e:
        await self.bot.send_message(f"‚ùå –û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: {e}")
```

#### ‚ö†Ô∏è –ü—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏**: Kill Switch –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–ï–†–ï–î –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–∏—Å—Ç–µ–º—ã
- **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞**: –±–ª–æ–∫–∏—Ä—É–µ—Ç systemd –∏ cron –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è**: —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: graceful shutdown —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º

---

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### WebInterface - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö  
**–§–∞–π–ª**: `src/web_interface.py` (350+ —Å—Ç—Ä–æ–∫)

#### üñ•Ô∏è –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```python
class WebInterface:
    def __init__(self, database, system_monitor, port: int = 8080):
        self.database = database
        self.system_monitor = system_monitor
        self.port = port
        
        if not FLASK_AVAILABLE:
            logger.warning("‚ö†Ô∏è Flask –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.")
            return
        
        self.setup_flask()
```

#### üîó –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints

```python
# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
@app.route('/')
def index():
    return render_template_string(self.get_main_template())

# API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
@app.route('/api/stats')  
def get_stats():
    # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ –±–∞–∑—ã + —Å–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    stats = loop.run_until_complete(self.database.get_today_stats())
    system_stats = {
        'memory': self.system_monitor.get_memory_usage(),
        'cpu': self.system_monitor.get_cpu_usage(),
        'disk': self.system_monitor.get_disk_usage()
    }
    
    return jsonify({
        'database': stats,
        'system': system_stats,
        'timestamp': datetime.now().isoformat()
    })

# API –Ω–æ–≤–æ—Å—Ç–µ–π
@app.route('/api/news')
def get_news():
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –±–∞–∑—ã
    # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
```

#### üìä –û—Ç–æ–±—Ä–∞–∂–∞–µ–º–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤, –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
- **–°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU, –ø–∞–º—è—Ç–∏, –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞  
- **–ü–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏**: —Å–ø–∏—Å–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ–≥–∏–æ–Ω—É
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: —Å—Ç–∞—Ç—É—Å Telegram –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- **Live –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ AJAX

#### ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Flask –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
pip install flask

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl http://localhost:8080
```

---

## üöÄ –î–µ–ø–ª–æ–π –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### systemd —Å–µ—Ä–≤–∏—Å

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π —á–µ—Ä–µ–∑ systemd  
**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–µ–ø–ª–æ–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

#### üìã –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
systemctl start news-monitor.service      # –ó–∞–ø—É—Å–∫
systemctl stop news-monitor.service       # –û—Å—Ç–∞–Ω–æ–≤–∫–∞  
systemctl restart news-monitor.service    # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl status news-monitor.service     # –°—Ç–∞—Ç—É—Å

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable news-monitor.service     # –í–∫–ª—é—á–∏—Ç—å
systemctl disable news-monitor.service    # –û—Ç–∫–ª—é—á–∏—Ç—å

# –õ–æ–≥–∏
journalctl -u news-monitor.service -f     # –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
journalctl -u news-monitor.service --since "1 hour ago"  # –ó–∞ —á–∞—Å
```

#### üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–∞

```ini
[Unit]
Description=News Monitor Bot
After=network.target

[Service]
Type=simple
User=news-monitor
WorkingDirectory=/opt/news-monitor/SMI_tg_bot
ExecStart=/usr/bin/python3 main.py
Restart=always
RestartSec=10
Environment=PYTHONPATH=/opt/news-monitor/SMI_tg_bot

[Install]
WantedBy=multi-user.target
```

### server_commands.txt - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü–æ–ª–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–º  
**–§–∞–π–ª**: `server_commands.txt` (255 —Å—Ç—Ä–æ–∫)

#### üóÇÔ∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∫–æ–º–∞–Ω–¥

```bash
# üìç –û–°–ù–û–í–ù–´–ï –ü–£–¢–ò
/opt/news-monitor/SMI_tg_bot                    # –ü—Ä–æ–µ–∫—Ç
/opt/news-monitor/SMI_tg_bot/logs/              # –õ–æ–≥–∏  
/opt/news-monitor/SMI_tg_bot/config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
/opt/news-monitor/SMI_tg_bot/sessions/          # Telegram —Å–µ—Å—Å–∏–∏

# üîß –£–ü–†–ê–í–õ–ï–ù–ò–ï –°–ï–†–í–ò–°–û–ú
systemctl restart news-monitor.service         # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl status news-monitor.service          # –°—Ç–∞—Ç—É—Å

# üìã –õ–û–ì–ò –ò –ú–û–ù–ò–¢–û–†–ò–ù–ì
tail -f logs/news_monitor.log                  # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
grep -i "error" logs/news_monitor.log          # –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "$(date +%Y-%m-%d)" logs/news_monitor.log # –õ–æ–≥–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

# üîÑ GIT –û–ë–ù–û–í–õ–ï–ù–ò–Ø  
git pull                                       # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git status                                     # –°—Ç–∞—Ç—É—Å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

# üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê
free -h                                        # –ü–∞–º—è—Ç—å
df -h                                          # –î–∏—Å–∫  
ps aux | grep python                          # Python –ø—Ä–æ—Ü–µ—Å—Å—ã

# ‚ö†Ô∏è –≠–ö–°–¢–†–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´
rm -f config/subscriptions_cache.json         # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
rm -f sessions/news_monitor_session.session   # –°–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏
```

#### üö® –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

```bash
# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart news-monitor.service && tail -f logs/news_monitor.log

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
git pull && systemctl restart news-monitor.service

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫  
rm -f config/subscriptions_cache.json && systemctl restart news-monitor.service

# –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
systemctl status news-monitor.service && free -h && df -h && ps aux | grep python
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

#### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

```python
# –í src/core/config_loader.py
logging:
  file: logs/news_monitor.log    # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ª–æ–≥–æ–≤
  level: INFO                    # –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏

# –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ loguru)
logger.add(
    "logs/news_monitor.log",
    rotation="10 MB",              # –ù–æ–≤—ã–π —Ñ–∞–π–ª –∫–∞–∂–¥—ã–µ 10MB
    retention="30 days",           # –•—Ä–∞–Ω–∏—Ç—å 30 –¥–Ω–µ–π
    format="{time:YYYY-MM-DD HH:mm:ss} | {level} | {message}"
)
```

#### üîç –ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ –ª–æ–≥–∞—Ö

```bash
# –£—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
grep "‚úÖ" logs/news_monitor.log

# –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è  
grep -E "(‚ùå|‚ö†Ô∏è)" logs/news_monitor.log

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã
grep "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" logs/news_monitor.log

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram
grep "Telegram –∫–ª–∏–µ–Ω—Ç" logs/news_monitor.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–Ω–∞–ª–æ–≤
grep "üì°.*–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥" logs/news_monitor.log
```

#### üìà –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```python
# –í src/system_monitor.py (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
class SystemMonitor:
    def get_memory_usage(self) -> Dict[str, float]:
        """–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –≤ MB"""
        
    def get_cpu_usage(self) -> float:
        """–ó–∞–≥—Ä—É–∑–∫–∞ CPU –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö"""
        
    def get_disk_usage(self) -> Dict[str, float]:  
        """–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞ –≤ GB"""
        
    def get_uptime(self) -> str:
        """–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã"""
```

---

## üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### üö´ "Bot blocked from starting" 

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Kill Switch
ls -la STOP_BOT

# –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –±–æ—Ç–∞
/unlock

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é
rm STOP_BOT
```

#### üì° "Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç"

```bash
# –°–±—Ä–æ—Å —Å–µ—Å—Å–∏–∏
RESET_TELETHON_SESSION=1 python tools/setup_user_auth.py

# –ò–ª–∏ —É–¥–∞–ª–∏—Ç—å —Å–µ—Å—Å–∏—é –≤—Ä—É—á–Ω—É—é
rm sessions/news_monitor_session.session
python tools/setup_user_auth.py
```

#### üíæ "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∞"

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
ls -lah news_monitor.db

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
python tools/cleanup_database.py

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (7 –¥–Ω–µ–π)
python tools/cleanup_database.py 7
```

#### üîÑ "–°–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
systemctl status news-monitor.service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -50 logs/news_monitor.log

# –ñ–µ—Å—Ç–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart news-monitor.service
```

#### ‚ö†Ô∏è "Rate limit –æ—Ç Telegram"

```bash
# –ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
grep "wait of.*seconds" logs/news_monitor.log

# –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –ø–æ–¥–ø–∏—Å–æ–∫
rm config/subscriptions_cache.json

# –£–≤–µ–ª–∏—á–∏—Ç—å —Ç–∞–π–º–∞—É—Ç—ã –≤ config.yaml
nano config/config.yaml  # –°–µ–∫—Ü–∏—è monitoring.timeouts
```

### –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

#### üìÖ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞—á–∏

```bash
# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å 30 –¥–Ω–µ–π)
find logs/ -name "*.log.*" -mtime +30 -delete

# –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å 14 –¥–Ω–µ–π)  
python tools/cleanup_database.py 14

# –ë—ç–∫–∞–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∫–∞–Ω–∞–ª–æ–≤
python tools/backup_channels_config.py

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull
systemctl restart news-monitor.service
```

#### üìä –ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–∑—ã
du -sh news_monitor.db

# –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
grep -c "‚ùå" logs/news_monitor.log

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–Ω–∞–ª–æ–≤
grep "üìä –ù–∞–π–¥–µ–Ω–æ.*—Å–æ–æ–±—â–µ–Ω–∏–π" logs/news_monitor.log | tail -20

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
free -h && df -h
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### üöÄ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

- [ ] **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
  ```bash
  git clone <repository_url>
  cd news-monitor-bot
  ```

- [ ] **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
  ```bash
  pip install -r requirements.txt
  pip install flask  # –î–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  ```

- [ ] **–°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞**
  ```bash
  cp env_template.txt .env
  # –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  ```

- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
  ```bash
  python tools/setup_user_auth.py
  ```

- [ ] **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ**
  ```bash
  python tools/safe_mode.py
  ```

- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞**
  ```bash
  sudo systemctl enable news-monitor.service
  sudo systemctl start news-monitor.service
  ```

### üîß –ü–æ—Å–ª–µ—É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞**
  ```bash
  systemctl status news-monitor.service
  ```

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏**
  ```bash
  tail -f logs/news_monitor.log
  ```

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**
  ```bash
  curl http://localhost:8080
  ```

- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞**
  ```bash
  # –í Telegram: /start, /status
  ```

- [ ] **–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –±—ç–∫–∞–ø**
  ```bash
  python tools/backup_channels_config.py
  ```

### üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤**
- [ ] **–î–æ–±–∞–≤–∏—Ç—å cron –∑–∞–¥–∞—á–∏ –¥–ª—è –±—ç–∫–∞–ø–æ–≤**
- [ ] **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö**  
- [ ] **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏**
- [ ] **–ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—É—Ç–∏ –∏ –ø–∞—Ä–æ–ª–∏**

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Utilities –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞: —è–Ω–≤–∞—Ä—å 2025*  
*–ü–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã*
